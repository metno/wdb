#!/bin/sh
# Script Information
export TESTCASE="P003_04"
export TEST_DESCRIPTION="Twenty-four (24) process, complex points"
export TEST_PATH=__WDB_BUILDDIR__/test/performance/callInterface

# Test Environment
source $TEST_PATH/testEnvironment.sh

# Parse command line
case $1 in
    --help) 
    echo "$SCRIPT_USAGE"; exit 0;;
    --version) 
    echo "$0 $SCRIPT_VERSION"; exit 0;;
esac

# Prepare Test
totalTime=0

# Execute Test 1
rm -f ${TMP_PATH}/startTime.log
rm -f ${TMP_PATH}/endTime.log
touch ${TMP_PATH}/startTime.log
touch ${TMP_PATH}/endTime.log
${TEST_PATH}/wciRead_time.sh 41 > ${TMP_PATH}/$TESTCASE_FILE-1.out &
${TEST_PATH}/wciRead_time.sh 41 > ${TMP_PATH}/$TESTCASE_FILE-2.out &
${TEST_PATH}/wciRead_time.sh 41 > ${TMP_PATH}/$TESTCASE_FILE-3.out &
${TEST_PATH}/wciRead_time.sh 41 > ${TMP_PATH}/$TESTCASE_FILE-4.out &
${TEST_PATH}/wciRead_time.sh 41 > ${TMP_PATH}/$TESTCASE_FILE-5.out &
${TEST_PATH}/wciRead_time.sh 41 > ${TMP_PATH}/$TESTCASE_FILE-6.out &
${TEST_PATH}/wciRead_time.sh 41 > ${TMP_PATH}/$TESTCASE_FILE-7.out &
${TEST_PATH}/wciRead_time.sh 41 > ${TMP_PATH}/$TESTCASE_FILE-8.out &
${TEST_PATH}/wciRead_time.sh 41 > ${TMP_PATH}/$TESTCASE_FILE-9.out &
${TEST_PATH}/wciRead_time.sh 41 > ${TMP_PATH}/$TESTCASE_FILE-10.out &
${TEST_PATH}/wciRead_time.sh 41 > ${TMP_PATH}/$TESTCASE_FILE-11.out &
${TEST_PATH}/wciRead_time.sh 41 > ${TMP_PATH}/$TESTCASE_FILE-12.out &
${TEST_PATH}/wciRead_time.sh 41 > ${TMP_PATH}/$TESTCASE_FILE-13.out &
${TEST_PATH}/wciRead_time.sh 41 > ${TMP_PATH}/$TESTCASE_FILE-14.out &
${TEST_PATH}/wciRead_time.sh 41 > ${TMP_PATH}/$TESTCASE_FILE-15.out &
${TEST_PATH}/wciRead_time.sh 41 > ${TMP_PATH}/$TESTCASE_FILE-16.out &
${TEST_PATH}/wciRead_time.sh 41 > ${TMP_PATH}/$TESTCASE_FILE-17.out &
${TEST_PATH}/wciRead_time.sh 41 > ${TMP_PATH}/$TESTCASE_FILE-18.out &
${TEST_PATH}/wciRead_time.sh 41 > ${TMP_PATH}/$TESTCASE_FILE-19.out &
${TEST_PATH}/wciRead_time.sh 41 > ${TMP_PATH}/$TESTCASE_FILE-20.out &
${TEST_PATH}/wciRead_time.sh 41 > ${TMP_PATH}/$TESTCASE_FILE-21.out &
${TEST_PATH}/wciRead_time.sh 41 > ${TMP_PATH}/$TESTCASE_FILE-22.out &
${TEST_PATH}/wciRead_time.sh 41 > ${TMP_PATH}/$TESTCASE_FILE-23.out &
${TEST_PATH}/wciRead_time.sh 41 > ${TMP_PATH}/$TESTCASE_FILE-24.out &
wait
startTime=`head -1 ${TMP_PATH}/startTime.log`
endTime=`tail -1 ${TMP_PATH}/endTime.log`
let totalTime=totalTime+endTime-startTime

# Execute Test 2
rm -f ${TMP_PATH}/startTime.log
rm -f ${TMP_PATH}/endTime.log
touch ${TMP_PATH}/startTime.log
touch ${TMP_PATH}/endTime.log
${TEST_PATH}/wciRead_time.sh 41 > ${TMP_PATH}/$TESTCASE_FILE-1.out &
${TEST_PATH}/wciRead_time.sh 41 > ${TMP_PATH}/$TESTCASE_FILE-2.out &
${TEST_PATH}/wciRead_time.sh 41 > ${TMP_PATH}/$TESTCASE_FILE-3.out &
${TEST_PATH}/wciRead_time.sh 41 > ${TMP_PATH}/$TESTCASE_FILE-4.out &
${TEST_PATH}/wciRead_time.sh 41 > ${TMP_PATH}/$TESTCASE_FILE-5.out &
${TEST_PATH}/wciRead_time.sh 41 > ${TMP_PATH}/$TESTCASE_FILE-6.out &
${TEST_PATH}/wciRead_time.sh 41 > ${TMP_PATH}/$TESTCASE_FILE-7.out &
${TEST_PATH}/wciRead_time.sh 41 > ${TMP_PATH}/$TESTCASE_FILE-8.out &
${TEST_PATH}/wciRead_time.sh 41 > ${TMP_PATH}/$TESTCASE_FILE-9.out &
${TEST_PATH}/wciRead_time.sh 41 > ${TMP_PATH}/$TESTCASE_FILE-10.out &
${TEST_PATH}/wciRead_time.sh 41 > ${TMP_PATH}/$TESTCASE_FILE-11.out &
${TEST_PATH}/wciRead_time.sh 41 > ${TMP_PATH}/$TESTCASE_FILE-12.out &
${TEST_PATH}/wciRead_time.sh 41 > ${TMP_PATH}/$TESTCASE_FILE-13.out &
${TEST_PATH}/wciRead_time.sh 41 > ${TMP_PATH}/$TESTCASE_FILE-14.out &
${TEST_PATH}/wciRead_time.sh 41 > ${TMP_PATH}/$TESTCASE_FILE-15.out &
${TEST_PATH}/wciRead_time.sh 41 > ${TMP_PATH}/$TESTCASE_FILE-16.out &
${TEST_PATH}/wciRead_time.sh 41 > ${TMP_PATH}/$TESTCASE_FILE-17.out &
${TEST_PATH}/wciRead_time.sh 41 > ${TMP_PATH}/$TESTCASE_FILE-18.out &
${TEST_PATH}/wciRead_time.sh 41 > ${TMP_PATH}/$TESTCASE_FILE-19.out &
${TEST_PATH}/wciRead_time.sh 41 > ${TMP_PATH}/$TESTCASE_FILE-20.out &
${TEST_PATH}/wciRead_time.sh 41 > ${TMP_PATH}/$TESTCASE_FILE-21.out &
${TEST_PATH}/wciRead_time.sh 41 > ${TMP_PATH}/$TESTCASE_FILE-22.out &
${TEST_PATH}/wciRead_time.sh 41 > ${TMP_PATH}/$TESTCASE_FILE-23.out &
${TEST_PATH}/wciRead_time.sh 41 > ${TMP_PATH}/$TESTCASE_FILE-24.out &
wait
startTime=`head -1 ${TMP_PATH}/startTime.log`
endTime=`tail -1 ${TMP_PATH}/endTime.log`
let totalTime=totalTime+endTime-startTime

# Execute Test 3
rm -f ${TMP_PATH}/startTime.log
rm -f ${TMP_PATH}/endTime.log
touch ${TMP_PATH}/startTime.log
touch ${TMP_PATH}/endTime.log
${TEST_PATH}/wciRead_time.sh 41 > ${TMP_PATH}/$TESTCASE_FILE-1.out &
${TEST_PATH}/wciRead_time.sh 41 > ${TMP_PATH}/$TESTCASE_FILE-2.out &
${TEST_PATH}/wciRead_time.sh 41 > ${TMP_PATH}/$TESTCASE_FILE-3.out &
${TEST_PATH}/wciRead_time.sh 41 > ${TMP_PATH}/$TESTCASE_FILE-4.out &
${TEST_PATH}/wciRead_time.sh 41 > ${TMP_PATH}/$TESTCASE_FILE-5.out &
${TEST_PATH}/wciRead_time.sh 41 > ${TMP_PATH}/$TESTCASE_FILE-6.out &
${TEST_PATH}/wciRead_time.sh 41 > ${TMP_PATH}/$TESTCASE_FILE-7.out &
${TEST_PATH}/wciRead_time.sh 41 > ${TMP_PATH}/$TESTCASE_FILE-8.out &
${TEST_PATH}/wciRead_time.sh 41 > ${TMP_PATH}/$TESTCASE_FILE-9.out &
${TEST_PATH}/wciRead_time.sh 41 > ${TMP_PATH}/$TESTCASE_FILE-10.out &
${TEST_PATH}/wciRead_time.sh 41 > ${TMP_PATH}/$TESTCASE_FILE-11.out &
${TEST_PATH}/wciRead_time.sh 41 > ${TMP_PATH}/$TESTCASE_FILE-12.out &
${TEST_PATH}/wciRead_time.sh 41 > ${TMP_PATH}/$TESTCASE_FILE-13.out &
${TEST_PATH}/wciRead_time.sh 41 > ${TMP_PATH}/$TESTCASE_FILE-14.out &
${TEST_PATH}/wciRead_time.sh 41 > ${TMP_PATH}/$TESTCASE_FILE-15.out &
${TEST_PATH}/wciRead_time.sh 41 > ${TMP_PATH}/$TESTCASE_FILE-16.out &
${TEST_PATH}/wciRead_time.sh 41 > ${TMP_PATH}/$TESTCASE_FILE-17.out &
${TEST_PATH}/wciRead_time.sh 41 > ${TMP_PATH}/$TESTCASE_FILE-18.out &
${TEST_PATH}/wciRead_time.sh 41 > ${TMP_PATH}/$TESTCASE_FILE-19.out &
${TEST_PATH}/wciRead_time.sh 41 > ${TMP_PATH}/$TESTCASE_FILE-20.out &
${TEST_PATH}/wciRead_time.sh 41 > ${TMP_PATH}/$TESTCASE_FILE-21.out &
${TEST_PATH}/wciRead_time.sh 41 > ${TMP_PATH}/$TESTCASE_FILE-22.out &
${TEST_PATH}/wciRead_time.sh 41 > ${TMP_PATH}/$TESTCASE_FILE-23.out &
${TEST_PATH}/wciRead_time.sh 41 > ${TMP_PATH}/$TESTCASE_FILE-24.out &
wait
startTime=`head -1 ${TMP_PATH}/startTime.log`
endTime=`tail -1 ${TMP_PATH}/endTime.log`
let totalTime=totalTime+endTime-startTime

averageTimeRetrieval=$(echo "$totalTime / 3000000000.0" | bc -l)
averageRows=$(echo "2250.0 * 24 / $averageTimeRetrieval" | bc -l)

echo "Average Time: $averageTimeRetrieval seconds"
echo "Rows Returned: $averageRows per second"

# Exit
echo -e "ok $1 - `basename $0`\t$TEST_DESCRIPTION"
exit 0
